<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GSS - Usuário</title>
  <link rel="stylesheet" href="./css/estilo.css">
  <link rel="icon" href="assets/Imagens PI GSS/Imagens usadas/ImagenSite.ico" type="image/x-icon">
</head>

<body>

  <!-- Cabeçalho -->
  <header class="header">
    <div class="user-icon"></div>
    <h1>Gandin Skate School</h1>
    <div class="user-icon"></div>
  </header>

  <div class="user-page">
    <!-- Barra lateral -->
    <aside class="sidebar">
      <h3>Menu</h3>
      <a href="#videos">Vídeos</a>
      <a href="PáginaUsuárioSobreSK8.html">Sobre o Skate</a>
      <a href="Dashboard.html">Gráfico de desempenho</a>
      <h4>
        <a href="index.html">Sair ↩</a>
      </h4>

    </aside>

    <!-- Conteúdo principal -->
    <div class="main-content">

      <!-- Área de vídeos -->
      <section id="videos">

        <!-- Manobras Iniciantes -->>
        <div class="video-card">
          <h2>Manobra: Ollie - Dificuldade: Iniciante</h2>

          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/JSIW1IMUoVk?si=yTKj9Ov9lEAUyMSI" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen>
          </iframe>


          <p>O Ollie funciona assim: você começa posicionando os pés no skate, com um pé na parte de trás e o outro mais
            no meio. Primeiro, você bate com força a parte de trás no chão, como se fosse dar um impulso. Ao mesmo
            tempo, o pé da frente sobe, deslizando pela lixa para puxar o skate junto com você. Isso faz o skate sair do
            chão. Quando estiver no ar, você dobra os joelhos para ganhar altura e, na hora de descer, tenta pousar com
            os dois pés em cima, perto dos parafusos, para manter o equilíbrio.</p>
          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento1">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento1.value, 1)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra1">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'ollie' ,manobra1.value)">✅</button>
        </div>



        <div class="video-card">
          <h2>Manobra: Varial - Dificuldade: Iniciante</h2>
          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/fm8eumBfyH8?si=vpkjYHHJHRYQ6oLq" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br>

          <p>Para começar, posicione os pés corretamente: o pé de trás deve ficar no tail, com a ponta pronta para
            empurrar o skate, e o pé da frente próximo aos parafusos dianteiros, levemente inclinado. Flexione levemente
            os joelhos para ganhar impulso e equilíbrio.

            Para executar a manobra, pressione o tail para baixo com o pé de trás, fazendo um movimento rápido e
            ligeiramente para trás, impulsionando o skate para girar 180 graus. O pé da frente serve mais para guiar a
            rotação, mantendo o controle do skate no ar.

            Durante a rotação, mantenha o corpo centralizado e o olhar focado no skate. Quando ele completar a rotação
            de 180 graus, posicione os pés para aterrissar, absorvendo o impacto com os joelhos flexionados. Praticar o
            controle do movimento é essencial, então comece em uma superfície plana até ganhar confiança!</p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento2">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento2.value, 2)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra2">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'varial' ,manobra2.value)">✅</button>
        </div>

        <div class="video-card">

          <h2>Manobra: Ollie de Front - Dificuldade: Iniciante</h2>
          <iframe style="border-radius: 10ox;" width="560" height="315"
            src="https://www.youtube.com/embed/s6JphmhYqOw?si=Ndqnnpb2yrcrZP4i" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br>

          <p>Para começar, posicione o pé de trás no tail, como no Ollie normal, e o pé da frente perto do meio do
            skate. Flexione os joelhos e prepare-se para girar o corpo. Ao executar a manobra, dê o pop com o pé de trás
            para levantar o skate e, simultaneamente, vire os ombros e o tronco na direção frontside (para a frente).

            Conforme você sobe no ar, o skate acompanha a rotação dos ombros. Use o pé da frente para manter o controle
            do skate durante o giro. Ao completar a rotação, alinhe o corpo com o skate, prepare-se para aterrissar e
            flexione os joelhos para absorver o impacto.

            Praticar a sincronização entre o giro do corpo e o movimento do skate é essencial para dominar o Ollie de
            Front. Comece em uma superfície plana e vá evoluindo! </p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento3">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento3.value, 3)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra3">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'olliefront' ,manobra3.value)">✅</button>
        </div>

        <!-- Manobras Intermediárias -->

        <div class="video-card">

          <h2>Manobra: Flip - Dificuldade: Intermediário</h2>
          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/A70jcTGDFss?si=EtfP0CQq8zyyHurd" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br>

          <p>Para começar o Flip, posicione o pé de trás no tail, como no ollie normal, e o pé da frente na borda do
            skate, um pouco virado para fora. Flexione os joelhos e prepare-se. Ao dar o pop com o pé de trás, use o pé
            da frente para chutar a borda do skate, fazendo-o girar no ar. É importante que o chute seja rápido e
            controlado. Mantenha o corpo centrado enquanto o skate gira. Assim que completar o giro, traga os dois pés
            de volta para o skate, prepare-se para aterrissar e flexione os joelhos ao tocar o chão. Praticar o controle
            do flip é essencial para acertar essa manobra!</p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento4">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento4.value, 4)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra4">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'flip' ,manobra4.value)">✅</button>
        </div>

        <div class="video-card">

          <h2>Manobra: Fakie Ollie - Dificuldade: Intermediário</h2>
          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/aXhYElkaKxs?si=GmWGBVVYHlaGEXPk" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br>

          <p>No Fakie Ollie, você começa andando de fakie (de costas). Posicione o pé da frente no nose e o pé de trás
            um pouco antes do meio do skate. Flexione os joelhos e prepare-se para dar o pop. Ao dar o impulso com o pé
            da frente, puxe o skate para cima como no ollie tradicional. No ar, mantenha o equilíbrio com os ombros
            alinhados e controle o movimento com o pé de trás. Aterrisse com os dois pés, absorvendo o impacto com os
            joelhos. O desafio aqui é manter o controle andando de fakie, então pratique bastante!</p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento5">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento5.value, 5)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra5">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'fakieollie' ,manobra5.value)">✅</button>
        </div>

        <div class="video-card">

          <h2>Manobra: Fakie de Front - Dificuldade: Intermediário</h2>
          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/lYVMKEsDsKU?si=fHkyPTleg-KM6usJ" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br>

          <p>Para o Fakie de Front, comece andando de fakie e posicione o pé da frente no nose, como no fakie ollie, e o
            pé de trás no meio do skate. Flexione os joelhos e prepare-se para girar o corpo. Ao dar o pop, vire os
            ombros e o tronco para a direção frontside (para a frente). O skate vai seguir o movimento do seu corpo no
            ar. Use o pé de trás para controlar o skate durante o giro. Ao completar os 180 graus, alinhe o corpo com o
            skate e aterrisse suavemente, flexionando os joelhos para absorver o impacto. Pratique a rotação para
            sincronizar o giro do corpo com o movimento do skate!</p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento6">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento6.value, 6)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra6">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'fakiefront' ,manobra6.value)">✅</button>
        </div>

        <!--Manobras Avançadas-->
        <div class="video-card">


          <h2>Manobra: 360 Varial - Dificuldade: Avançado</h2>
          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/8Runu9ozxAw?si=DA66DUPhlzvwBB6P" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>

          <p>O 360 Varial combina dois movimentos principais: um giro completo de 360 graus do skate (o "shuvit") e um
            flip (giro da prancha). Durante a execução, o skatista impulsiona o tail (parte traseira do skate) com o pé
            de trás, fazendo o skate girar horizontalmente em um eixo vertical enquanto o pé da frente realiza o
            movimento do flip. O desafio está em manter o controle durante a rotação completa, garantindo que a prancha
            volte à posição original para o pouso.</p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento7">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" class="select-usuario"
            onclick="GuardarResposta(andamento7.value, 7)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra7">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'varial360' ,manobra7.value)">✅</button>
        </div>

        <div class="video-card">
          <h2>Manobra: Ollie de Back - Dificuldade: Avançado</h2>
          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/RXAUUYmtiXs?si=FMMqL6V0lOlx_Lbq" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br>

          <p>Para começar, posicione o pé de trás no tail, como no ollie normal, e o pé da frente próximo ao meio do
            skate. Flexione os joelhos e prepare-se para girar o corpo. Ao dar o pop com o pé de trás, comece a girar os
            ombros e o tronco na direção backside (para o lado do calcanhar). No ar, o skate acompanha o movimento do
            corpo. Use o pé da frente para manter o skate alinhado durante o giro. Ao completar os 180 graus, alinhe o
            corpo com o skate e prepare-se para aterrissar. Flexione os joelhos ao tocar o chão para absorver o impacto.
            Pratique bastante a rotação do corpo junto com o skate!</p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento8">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento8.value, 8)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra8">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'ollieback',manobra8.value)">✅</button>
        </div>

        <div class="video-card">
          <h2>Manobra: 360 flip - Dificuldade: Avançado</h2>
          <iframe style="border-radius: 20px;" width="560" height="315"
            src="https://www.youtube.com/embed/xBakkJMWa5k?si=cdYzXv4ZoYepc6BD" title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe><br>

          <p>Para executar o 360 Flip, coloque o pé de trás na ponta do tail, como se fosse fazer um shove-it, e o pé da
            frente na borda do skate. Flexione os joelhos e prepare-se para o movimento. Ao dar o pop com o pé de trás,
            faça o skate girar 360 graus e, ao mesmo tempo, dê um chute rápido com o pé da frente para fazer o flip.
            Mantenha o corpo centrado e os olhos no skate. Quando o skate completar o giro, traga os pés de volta para o
            skate, alinhe o corpo e prepare-se para aterrissar. Flexione os joelhos ao tocar o chão. O segredo dessa
            manobra está na sincronização dos dois movimentos!</p>

          <p>Como está o aprendizado da manobra ?</p>
          <select class="select-usuario" id="andamento9">
            <option value="1">Em andamento</option>
            <option value="2">Não tentei ainda</option>
            <option value="3">Já acertei</option>
          </select>
          <button class="botao-select" onclick="GuardarResposta(andamento9.value, 9)">✅</button><br><br>
          Quantas vezes já acertou ?<br>
          <input min="0" class="ManobrasAcertadas" type="number" id="manobra9">
          <button class="botao-select"
            onclick="VerificarManobra(sessionStorage.ID_USUARIO, 'flip360',manobra9.value)">✅</button>
        </div>
      </section>
    </div>
  </div>
</body>

</html>
<script>
  async function VerificarResposta(video, idUsuario) {
    try {
      const resposta = await fetch("/video/VerificarResposta", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          video: video,
          idUsuario: idUsuario,
        }),
      });

      if (resposta.ok) {
        const json = await resposta.json();
        if (json.length != 0) {
          return true;
        }
      }
    } catch (erro) {
      console.log(`#ERRO: ${erro}`);
    }

    return false;
  }

  async function GuardarResposta(nivelUsuario, video) {
    var ResultadoResposta = false;
    var idUsuario = JSON.parse(sessionStorage.ID_USUARIO);


    if (await VerificarResposta(video, idUsuario)) {
      ResultadoResposta = true;
    }

    fetch("/video/GuardarResposta", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        nivelUsuario: nivelUsuario,
        video: video,
        ResultadoResposta: ResultadoResposta,
        idUsuario: idUsuario,
      }),
    })
      .then(function (resposta) {
        console.log("resposta: ", resposta);

        if (resposta.ok) {
          alert('Tá marcado');
        } else {
          throw "Houve um erro ao tentar realizar o cadastro!";
        }
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
  }


  async function ArmazenarManobra(idUsuario, Manobra, qtdAcertos) {
    try {
      const resposta = await fetch("/video/ArmazenarManobra", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({

          idUsuario: idUsuario,
          Manobra: Manobra,
          qtdAcertos: qtdAcertos
        }),
      });

      if (resposta.ok) {
        const json = await resposta.json();
        if (json.length != 0) {
          return true;
        }
      }
    } catch (erro) {
      console.log(`#ERRO: ${erro}`);
    }

    return false;
  }
  async function VerificarManobra(idUsuario, Manobra, qtdAcertos) {
    try {
      var idUsuario = sessionStorage.ID_USUARIO
      const resposta = await fetch(`/video/VerificarManobra/${idUsuario}`, {
        method: "GET",
        headers: {
          "Content-Type": "application/json",
        },
      });

      if (resposta.ok) {
        const json = await resposta.json();
        console.log(json)

        if (json.length != 0) {
          var valorManobra = json[0].Manobra || 0
          AtualizarManobra(idUsuario, Manobra, valorManobra + Number(qtdAcertos))

        } else {
          ArmazenarManobra(idUsuario, Manobra, qtdAcertos)
        }
      }
    }
    catch (erro) {
      console.log(`#ERRO: ${erro}`);
    }

    return false;

  }
  async function AtualizarManobra(idUsuario, Manobra, qtdAcertos) {
    try {
      const resposta = await fetch("/video/AtualizarManobra", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({

          idUsuario: idUsuario,
          Manobra: Manobra,
          qtdAcertos: qtdAcertos
        }),
      });

      if (resposta.ok) {
        const json = await resposta.json();

      }
    } catch (erro) {
      console.log(`#ERRO: ${erro}`);
    }

    return false;
  }

</script>